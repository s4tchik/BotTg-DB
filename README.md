# Telegram-бот с подпиской и реферальной системой

## Описание проекта

Telegram-бот, предоставляющий доступ к платному контенту с возможностью использования пробного периода или приобретения подписки. Бот также включает реферальную систему для привлечения новых пользователей.

## Функциональные возможности

### 1. Пользовательские функции
- **Пробный период**:
  - При первом запуске пользователь получает уникальный пробный ключ.
  - Пробный период действует 7 дней.
- **Подписка**:
  - Проверка статуса подписки.
  - Возможность продления подписки через поддержку.
- **Реферальная система**:
  - Генерация уникальной реферальной ссылки.
  - Отслеживание количества приглашенных пользователей.
- **Информация о сервисе**:
  - Описание функционала бота.
- **Помощь**:
  - Часто задаваемые вопросы (FAQ).

### 2. Админ-функции
- Просмотр статистики пользователей (активные/неактивные подписки).

### 3. Интерфейс
- Главное меню с кнопками:
  - Подписка.
  - Рефералы.
  - Помощь.
  - О сервисе.
  - Главное меню.

## Установка и запуск

### Необходимые компоненты
- Python 3.7+
- Библиотеки: \`aiogram\`, \`sqlalchemy\`

### Шаги установки

1. **Клонирование репозитория**
   \`\`\`bash
   git clone https://github.com/yourusername/telegram-subscription-bot.git
   cd telegram-subscription-bot
   \`\`\`

2. **Установка зависимостей**
   \`\`\`bash
   pip install aiogram sqlalchemy
   \`\`\`

3. **Настройка конфигурации**
   Замените значения в файле \`bot.py\`:
   - \`BOT_TOKEN\`: Токен вашего Telegram-бота.
   - \`ADMIN_IDS\`: Список ID администраторов.

4. **Инициализация базы данных**
   База данных создается автоматически при первом запуске. Все данные хранятся в файле \`bot.db\`.

5. **Запуск бота**
   \`\`\`bash
   python bot.py
   \`\`\`

## Использование

### Пользовательский режим
1. Запустите бота командой \`/start\`.
2. Получите пробный ключ и используйте его в течение 7 дней.
3. Используйте меню для:
   - Проверки статуса подписки.
   - Просмотра реферальной информации.
   - Получения помощи или информации о сервисе.

### Админ-режим
1. Используйте команду \`/admin\` для просмотра статистики пользователей.

## Структура кода

### База данных
- **Таблица \`users\`**:
  - \`id\`: Уникальный идентификатор пользователя.
  - \`trial_key\`: Пробный ключ.
  - \`subscription_active\`: Статус подписки.
  - \`trial_expires\`: Дата окончания пробного периода.
  - \`referral_code\`: Реферальная ссылка.
  - \`referred_by\`: ID пользователя, который пригласил текущего.
  - \`subscription_end\`: Дата окончания подписки.

### Обработчики
- **/start**:
  - Регистрация нового пользователя или приветствие существующего.
- **/subscription**:
  - Проверка статуса подписки.
- **/help**:
  - Отображение FAQ.
- **/info**:
  - Информация о сервисе.
- **/referral**:
  - Отображение реферальной ссылки и количества приглашенных пользователей.
- **/admin**:
  - Просмотр статистики пользователей.

### Клавиатуры
- **Главное меню**:
  - Кнопки для быстрого доступа к функциям.
- **Inline-клавиатуры**:
  - Управление подпиской (продление, проверка статуса).

### Вспомогательные функции
- Генерация пробных ключей и реферальных ссылок.
- Форматирование текстовых сообщений.

## Лицензия

[MIT](https://choosealicense.com/licenses/mit/)

## Поддержка

Если у вас возникли вопросы или проблемы, пожалуйста, свяжитесь с [вашим контактом].

## Благодарности

- Реализовано с использованием библиотек [\`aiogram\`](https://github.com/aiogram/aiogram) и [\`sqlalchemy\`](https://www.sqlalchemy.org/).
EOF
